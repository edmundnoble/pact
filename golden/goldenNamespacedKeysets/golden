{"module":{"hash":"bQbi32P6Nf2cGb_FCnPxtmDBwPvf1N5_m1WNaTqVfnE","blessed":[],"interfaces":[],"imports":[],"name":{"namespace":"free","name":"nks"},"code":"(module nks \"free.k1\"\n  (defschema sch col:integer)\n  (deftable tbl:{sch})\n\n  (defun insertTbl (a i)\n    (insert tbl a { 'col: i }))\n\n  (defun updateTbl (a i)\n     (update tbl a { 'col: i}))\n\n  (defun weirdUpdateTbl (a i)\n    (update tbl a { 'col: 0})\n    (update tbl a { 'col: i}))\n\n  (defun readTbl ()\n    (sort (map (at \"col\")\n    (select tbl (constantly true)))))\n\n  (defpact dopact (n)\n    (step { 'name: n, 'value: 1 })\n    (step { 'name: n, 'value: 2 }))\n)\n","meta":{"model":[],"docs":null},"governance":{"keyset":{"ns":"free","ksn":"k1"}}},"refMap":{"tbl":{"ref":{"hash":"bQbi32P6Nf2cGb_FCnPxtmDBwPvf1N5_m1WNaTqVfnE","modname":{"namespace":"free","name":"nks"},"name":"tbl","meta":{"model":[],"docs":null},"type":{"var":{"ref":{"modname":{"namespace":"free","name":"nks"},"name":"sch","meta":{"model":[],"docs":null},"i":null,"fields":[{"name":"col","type":"integer","info":null}]}},"i":null},"i":null}},"sch":{"ref":{"modname":{"namespace":"free","name":"nks"},"name":"sch","meta":{"model":[],"docs":null},"i":null,"fields":[{"name":"col","type":"integer","info":null}]}},"readTbl":{"ref":{"defType":"Defun","defMeta":null,"funType":{"args":[],"return":{"tag":"TypeVar","name":"j","constraint":[]}},"defName":"readTbl","defBody":{"scope":{"list":[{"args":[{"args":[{"args":[{"i":null,"lit":"col"}],"fun":{"var":{"f":{"var":{"direct":{"pdnat":"at"}},"i":null}},"i":null},"info":null},{"args":[{"var":{"f":{"var":{"ref":{"hash":"bQbi32P6Nf2cGb_FCnPxtmDBwPvf1N5_m1WNaTqVfnE","modname":{"namespace":"free","name":"nks"},"name":"tbl","meta":{"model":[],"docs":null},"type":{"var":{"ref":{"modname":{"namespace":"free","name":"nks"},"name":"sch","meta":{"model":[],"docs":null},"i":null,"fields":[{"name":"col","type":"integer","info":null}]}},"i":null},"i":null}},"i":null}},"i":null},{"args":[{"i":null,"lit":true}],"fun":{"var":{"f":{"var":{"direct":{"pdnat":"constantly"}},"i":null}},"i":null},"info":null}],"fun":{"var":{"f":{"var":{"direct":{"pdnat":"select"}},"i":null}},"i":null},"info":null}],"fun":{"var":{"f":{"var":{"direct":{"pdnat":"map"}},"i":null}},"i":null},"info":null}],"fun":{"var":{"f":{"var":{"direct":{"pdnat":"sort"}},"i":null}},"i":null},"info":null}],"type":"*","i":null}},"module":{"namespace":"free","name":"nks"},"meta":{"model":[],"docs":null},"info":null}},"updateTbl":{"ref":{"defType":"Defun","defMeta":null,"funType":{"args":[{"name":"a","type":{"tag":"TypeVar","name":"e","constraint":[]},"info":null},{"name":"i","type":{"tag":"TypeVar","name":"f","constraint":[]},"info":null}],"return":{"tag":"TypeVar","name":"d","constraint":[]}},"defName":"updateTbl","defBody":{"scope":{"list":[{"args":[{"var":{"f":{"var":{"ref":{"hash":"bQbi32P6Nf2cGb_FCnPxtmDBwPvf1N5_m1WNaTqVfnE","modname":{"namespace":"free","name":"nks"},"name":"tbl","meta":{"model":[],"docs":null},"type":{"var":{"ref":{"modname":{"namespace":"free","name":"nks"},"name":"sch","meta":{"model":[],"docs":null},"i":null,"fields":[{"name":"col","type":"integer","info":null}]}},"i":null},"i":null}},"i":null}},"i":null},{"var":{"b":0},"i":null},{"obj":{"col":{"var":{"b":1},"i":null}},"keyorder":["col"],"type":"*","i":null}],"fun":{"var":{"f":{"var":{"direct":{"pdnat":"update"}},"i":null}},"i":null},"info":null}],"type":"*","i":null}},"module":{"namespace":"free","name":"nks"},"meta":{"model":[],"docs":null},"info":null}},"dopact":{"ref":{"defType":"Defpact","defMeta":null,"funType":{"args":[{"name":"n","type":{"tag":"TypeVar","name":"l","constraint":[]},"info":null}],"return":{"tag":"TypeVar","name":"k","constraint":[]}},"defName":"dopact","defBody":{"scope":{"list":[{"body":{"exec":{"obj":{"value":{"i":null,"lit":{"int":1}},"name":{"var":{"b":0},"i":null}},"keyorder":["name","value"],"type":"*","i":null},"rollback":null,"entity":null,"info":null},"meta":{"model":[],"docs":null},"i":null},{"body":{"exec":{"obj":{"value":{"i":null,"lit":{"int":2}},"name":{"var":{"b":0},"i":null}},"keyorder":["name","value"],"type":"*","i":null},"rollback":null,"entity":null,"info":null},"meta":{"model":[],"docs":null},"i":null}],"type":"*","i":null}},"module":{"namespace":"free","name":"nks"},"meta":{"model":[],"docs":null},"info":null}},"insertTbl":{"ref":{"defType":"Defun","defMeta":null,"funType":{"args":[{"name":"a","type":{"tag":"TypeVar","name":"b","constraint":[]},"info":null},{"name":"i","type":{"tag":"TypeVar","name":"c","constraint":[]},"info":null}],"return":{"tag":"TypeVar","name":"a","constraint":[]}},"defName":"insertTbl","defBody":{"scope":{"list":[{"args":[{"var":{"f":{"var":{"ref":{"hash":"bQbi32P6Nf2cGb_FCnPxtmDBwPvf1N5_m1WNaTqVfnE","modname":{"namespace":"free","name":"nks"},"name":"tbl","meta":{"model":[],"docs":null},"type":{"var":{"ref":{"modname":{"namespace":"free","name":"nks"},"name":"sch","meta":{"model":[],"docs":null},"i":null,"fields":[{"name":"col","type":"integer","info":null}]}},"i":null},"i":null}},"i":null}},"i":null},{"var":{"b":0},"i":null},{"obj":{"col":{"var":{"b":1},"i":null}},"keyorder":["col"],"type":"*","i":null}],"fun":{"var":{"f":{"var":{"direct":{"pdnat":"insert"}},"i":null}},"i":null},"info":null}],"type":"*","i":null}},"module":{"namespace":"free","name":"nks"},"meta":{"model":[],"docs":null},"info":null}},"weirdUpdateTbl":{"ref":{"defType":"Defun","defMeta":null,"funType":{"args":[{"name":"a","type":{"tag":"TypeVar","name":"h","constraint":[]},"info":null},{"name":"i","type":{"tag":"TypeVar","name":"i","constraint":[]},"info":null}],"return":{"tag":"TypeVar","name":"g","constraint":[]}},"defName":"weirdUpdateTbl","defBody":{"scope":{"list":[{"args":[{"var":{"f":{"var":{"ref":{"hash":"bQbi32P6Nf2cGb_FCnPxtmDBwPvf1N5_m1WNaTqVfnE","modname":{"namespace":"free","name":"nks"},"name":"tbl","meta":{"model":[],"docs":null},"type":{"var":{"ref":{"modname":{"namespace":"free","name":"nks"},"name":"sch","meta":{"model":[],"docs":null},"i":null,"fields":[{"name":"col","type":"integer","info":null}]}},"i":null},"i":null}},"i":null}},"i":null},{"var":{"b":0},"i":null},{"obj":{"col":{"i":null,"lit":{"int":0}}},"keyorder":["col"],"type":"*","i":null}],"fun":{"var":{"f":{"var":{"direct":{"pdnat":"update"}},"i":null}},"i":null},"info":null},{"args":[{"var":{"f":{"var":{"ref":{"hash":"bQbi32P6Nf2cGb_FCnPxtmDBwPvf1N5_m1WNaTqVfnE","modname":{"namespace":"free","name":"nks"},"name":"tbl","meta":{"model":[],"docs":null},"type":{"var":{"ref":{"modname":{"namespace":"free","name":"nks"},"name":"sch","meta":{"model":[],"docs":null},"i":null,"fields":[{"name":"col","type":"integer","info":null}]}},"i":null},"i":null}},"i":null}},"i":null},{"var":{"b":0},"i":null},{"obj":{"col":{"var":{"b":1},"i":null}},"keyorder":["col"],"type":"*","i":null}],"fun":{"var":{"f":{"var":{"direct":{"pdnat":"update"}},"i":null}},"i":null},"info":null}],"type":"*","i":null}},"module":{"namespace":"free","name":"nks"},"meta":{"model":[],"docs":null},"info":null}}}}